chrome.extension.onMessage.addListener(function(b,d){if("getImages"==b.action){images=b.source;var a,c,f,g,e;if(0<images.length){a=0;for(f=1;a<images.length;a++,f++)c=document.getElementById("loading"),g=document.createElement("a"),e=document.createElement("img"),e.src=images[a],e.className="image-display",document.getElementById("display").appendChild(g),g.outerHTML='<a href="'+e.src+'" class="image-link" id="img'+f+'"download="Img_'+f+'".jpg>'+e.outerHTML+"</a>";c.parentNode.removeChild(c);chrome.storage.local.set({src:images});
addDownloadAll(images);addNewWindow()}else c=document.getElementById("loading"),c.parentNode.removeChild(c),a=document.createElement("div"),a.id="apologize",document.body.appendChild(a),a.innerHTML="<p>no images found</p>"}});
var addNewWindow=function(){var b=document.createElement("div");b.id="window_btn";document.body.appendChild(b);b.innerHTML='<a href="window.html", target ="_blank">Window View</a>'},addDownloadAll=function(b){var d,a,c;a=document.createElement("div");a.id="download_btn";document.body.appendChild(a);a.innerHTML='<a href="#">Download All</a>';a.addEventListener("click",function(){for(d=1;d<=b.length;d++)c=document.getElementById("img"+d),c.click()})};
function onWindowLoad(){var b=document.getElementById("loading");chrome.tabs.executeScript(null,{file:"/lightbox/js/jquery-1.11.0.min.js"},function(){chrome.extension.lastError?b.innerText="There was an error injecting script : \n"+chrome.extension.lastError.message:chrome.tabs.executeScript(null,{file:"js/content.min.js"})})}window.onload=onWindowLoad;